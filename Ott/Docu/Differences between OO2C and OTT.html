<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML>
<HEAD>
<TITLE>Differences between OO2C and OTT</TITLE>
</HEAD>
<BODY>
<!-- BEGIN WAYBACK TOOLBAR INSERT -->

<script type="text/javascript" src="http://staticweb.archive.org/js/disclaim-element.js" ></script>
<script type="text/javascript" src="http://staticweb.archive.org/js/graph-calc.js" ></script>
<script type="text/javascript" src="http://staticweb.archive.org/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1356998399999;
var wbPrefix = "http://web.archive.org/web/";
var wbCurrentUrl = "http:\/\/home.istar.ca\/~ianrae\/OTTdiffs.htm";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth=450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "17";
var displayMonth = "Nov";
var displayYear = "2000";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px; z-index:9000;">
<div id="wm-ipp-inside" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(http://staticweb.archive.org/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="http://wayback.archive.org/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="http://staticweb.archive.org/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="http://wayback.archive.org/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://home.istar.ca/~ianrae/OTTdiffs.htm" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="200011170201" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Oct
                       
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 2:01:00 Nov 17, 2000">NOV</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="http://web.archive.org/web/200012172221/http://home.istar.ca/~ianrae/OTTdiffs.htm" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="17 Dec 2000"><strong>DEC</strong></a>
		                
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="http://staticweb.archive.org/images/toolbar/wm_tb_prv_off.png" alt="Previous capture" width="14" height="16" border="0" />
                       
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 2:01:00 Nov 17, 2000">17</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="http://web.archive.org/web/200012172221/http://home.istar.ca/~ianrae/OTTdiffs.htm" title="22:21:00 Dec 17, 2000" style="background-color:transparent;border:none;"><img src="http://staticweb.archive.org/images/toolbar/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0"/></a>
		                
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       1999
                       
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 2:01:00 Nov 17, 2000">2000</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="http://web.archive.org/web/20011227144649/http://home.istar.ca/~ianrae/OTTdiffs.htm" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="27 Dec 2001"><strong>2001</strong></a>
		                
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="http://wayback.archive.org/web/20001117020100*/http://home.istar.ca/~ianrae/OTTdiffs.htm" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>6 captures</strong></a>
           <div style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">17 Nov 00 - 11 Jun 02</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="http://wayback.archive.org/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:10:000000000011_2001:-1:000000001001_2002:-1:000101000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000000000000_2008:-1:000000000000_2009:-1:000000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="http://staticweb.archive.org/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="http://staticweb.archive.org/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(http://staticweb.archive.org/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(http://staticweb.archive.org/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

<H1>Differences between OO2C and OTT</H1>
<HR>

<h2>1. A word on portability</h2>
  There are two types of portability.  The first is to preserve data sizes of variables so that
  all variables are the same size regardless of what that data type is called on a particular
  platform.  One platform's 4 byte integer is called LONGINT, an another's is called INTEGER.
  Automatic conversion is required for this method to be practical.  Even then
  it suffers from the edge problem -- sooner or later one's code calls other code for which
  the source code is not available.  The data types of these interfaces cannot be changed;
  therefore manual conversion code must be added.
<P>
  The second type of portability (which OTT uses) is to preserve source code.  Data types 
  are not changed if the type on the target platform is at least as large.  This minimizes
  the changes to source code at the expense of some runtime performance.
<P>
<h2>2. Data Types</h2>
Here are the sizes of the Oberon data types (in bytes):
<P>

<center>
<table width=100%>
<tr>
<td align=center bgcolor="#CCCCCC" colspan=1 width=20%>
Data Type
</td>
<td align=center bgcolor="#CCCCCC" colspan=1 width=20%>
Size in OOC
</td>
<td align=center bgcolor="#CCCCCC" colspan=1 width=20%>
Size in BBox
</td>
<td align=center bgcolor="#CCCCCC" colspan=1 width=40%>
Comments
</td>
</tr>

<tr>
<td>BYTE</td>
<td align=center >1</td>
<td align=center >1</td>
<td>Bbox BYTEs are signed! OOC are not.</td>
</tr>

<tr>
<td>BOOLEAN</td>
<td align=center >1</td>
<td align=center >1?</td>
<td></td>
</tr>

<tr>
<td>CHAR</td>
<td align=center >1</td>
<td align=center >2</td>
<td>Bbox CHARs support UNICODE</td>
</tr>

<tr>
<td>SHORTCHAR</td>
<td align=center >n.a.</td>
<td align=center >1</td>
<td>Only exists in BBox</td>
</tr>

<tr>
<td>SHORTINT</td>
<td align=center >1</td>
<td align=center >2</td>
<td></td>
</tr>

<tr>
<td>INTEGER</td>
<td align=center >2</td>
<td align=center >4</td>
<td></td>
</tr>

<tr>
<td>LONGINT</td>
<td align=center >4</td>
<td align=center >8</td>
<td>Can't index an array in BBOX with LONGINT. Can in OOC</td>
</tr>

<tr>
<td>HUGEINT</td>
<td align=center >8</td>
<td align=center >n.a.</td>
<td>Only exists in Oberon-2</td>
</tr>

<tr>
<td>REAL</td>
<td align=center >4</td>
<td align=center >8</td>
<td></td>
</tr>

<tr>
<td>LONGREAL</td>
<td align=center >8</td>
<td align=center >n.a.</td>
<td></td>
</tr>

<tr>
<td>SET</td>
<td align=center >4</td>
<td align=center >4</td>
<td></td>
</tr>

</table>
</center>

<P>
a) OTT uses CHAR in place of SYTEM.BYTE.
<P>
b) OTT defines a type OttLONGREAL that is used place of LONGREAL, which Bbox doesn't support.
<P>

<h2>3. Types of channels</h2>
Several concrete types are derived from OttChannel.
<table>
<tr>
<td>OttFiles</td>
<td>  native ASCII text files</td>
</tr>
<tr>
<td>OttLog</td>
<td>  BBox StdLog. writeable only.</td>
</tr>
<tr>
<td>OttTexts</td>
<td>  Bbox Texts.TextModel.  
</td>
</tr>
</table>

<P>
<h2>4. Modules</h2>
Here is a summary of changes to modules.  Data type changes as noted above are not listed here.
<P>
<table>
<tr>
<td>OttChannel</td>
<td>    unchanged</td>
</tr>
<tr>
<td>OttFiles</td>
<td>    unchanged. Date-related functions not yet implemented.</td>
</tr>
<tr>
<td>OttTexts</td>
<td>    OTT-specific file
Supports insert and overwrite modes.
An OttTexts.Text can be connected to: a new BBox textmodel, the
focus text, the current text selection, or a given textmodel.
</td>
</tr>
<tr>
<tr>
<td>OttLog</td>
<td>    OTT-specific file
Provides a writable non-positionable channel that outputs to the system log.
</td>
</tr>
<tr>
<td>OttUtils</td>
<td>    OTT-specific file</td>
</tr>
<tr>
<td>OttAscii</td>
<td>    unchanged</td>
</tr>
<tr>
<td>OttCharClass</td>
<td>    Sets systemEol according to base OS (PC or Mac)</td>
</tr>
<tr>
<td>OttStrings</td>
<td>    unchanged</td>
</tr>
<tr>
<td>OttIntConv</td>
<td>    unchanged</td>
</tr>
<tr>
<td>OttConvTypes</td>
<td>    unchanged</td>
</tr>
<tr>
<td>OttLRealConv</td>
<td>    unchanged</td>
</tr>
<tr>
<td>OttLRealStr</td>
<td>    Removed all but string parsing fns</td>
</tr>
<tr>
<td>OttIntStr</td>
<td>    unchanged</td>
</tr>
<tr>
<td>OttTextRider</td>
<td>    OttTextRider is somewhat changed. 
a)  Hex numbers (clarification of OOC implementation):
Reader.ReadHex looks for "08AF" with no terminating 'H".
Scanner looks for "08AFH". 
b) Writer Formats: TextWriter.WriteLReal and .WriteReal sometimes write an decimal point when
not required, as in "4.E+6". TextWriter.WriteLRealFix and .WriteRealFix write too many digits of precision
when k < 0.
</td>
</tr>
<tr>
<td>OttTokenizer</td>
<td>    
OTT-specific file.  Allows parsing of a channel into tokens separated by
a user-defined list of delimiter characters.  The default delimiters are whitespace
chars.  Similar to C's strtok() function.</td>
</tr>
<tr>
<td>OttOSA</td>
<td>    
OTT-specific file. Oberon-System Abstraction layer.  Hides low level platform-specific
issues.  For example, Bbox supports dstStr := srcStr$ to copy a string.  This is hidden
in a function called OttCOPY.</td>
</tr>
<tr>
<td>OttIn</td>
<td>    
Unchanged.  SetReader(NIL) connects to current selection in focus text.  Be sure to check In.Done after
calling SetReader(NIL) because if there is no focus text In.reader is NIL and the next In operation
will trap.  Bbox has no StdChannels like stdin.
</td>
</tr>
<tr>
<td>OttOut</td>
<td>    Unchanged.
SetWriter(NIL) connects to StdLog.  Bbox has no StdChannels like stdout or stderr.
</td>
</tr>
</table>


<h2>5. The End-Of-Line Issue</h2>
Different platforms have different Eol characters.  cr/lf for DOS, cr for BBox texts, cr for
Mac, and lf for UNIX text files.  OttChannel is a pure byte stream; it has no knowledge
of Eol semantics.  
<P>
OttTextRider supports auto-detection of Eol during reading, and a settable Eol during writing.
Setting the Eol requires knowledge of the type of channel:
<P>
<table>
<tr>
<td>OttFiles</td>
<td>
Use CharClass.systemEol which is set to DOS or Mac Eol chars for Bbox,
and OttAscii.lf for OO2C.</td>
</tr>
<tr>
<td>OttTexts</td>
<td>  Use OttAscii.cr</td>
</tr>
<tr>
<td>OttLog</td>
<td>  Use OttAscii.cr</td>
</tr>
</table>

</BODY>
</HTML>






<!--
     FILE ARCHIVED ON 2:01:00 Nov 17, 2000 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 9:12:57 May 6, 2012.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
